openapi: 3.1.0
info:
  title: "YStream API"
  description: "YStream API is a RESTful API for our streaming video service."
  contact:
    name: "YStream"
    email: "dev@ystream.com"
  version: "2.3.0"
servers:
  - url: "http://localhost:3000/api/prod"
    description: "Production server"
    variables:
      protocol:
        enum:
          - "http"
        default: "http"
  - url: "https://dev.ystream.com/api/dev"
    description: "Development server"
    variables:
      protocol:
        enum:
          - "https"
        default: "https"

tags:
  - name: "Users"
    description: "Operations about users"
  - name: "Videos"
    description: "Operations about videos"
  - name: "Comments"
    description: "Operations about comments"
  - name: "Categories"
    description: "Operations about categories"
  - name: "Channels"
    description: "Operations about channels"
  - name: "Historics"
    description: "Operations about historics"
  - name: "Rôles"
    description: "Operations about rôles"
  - name: "Notification"
    description: "Operations about notifications"

paths:
  /users:
    get:
      security:
        - bearerAuth: []
      tags:
        - "Users"
      summary: "Get all users"
      description: "Get all users"
      operationId: "getUsers"
      responses:
        '200':
          description: "Successful operation"
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/User"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
    post:
      security:
        - bearerAuth: []
      tags:
        - "Users"
      summary: "Create user"
      description: "Create user"
      operationId: "createUser"
      requestBody:
        description: "User object that needs to be added"
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/User"
      responses:
        '200':
          description: "Successful operation"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
  /users/{id}:
    get:
      security:
        - bearerAuth: []
      tags:
        - "Users"
      summary: "Get user by id"
      description: "Get user by id"
      operationId: "getUserById"
      parameters:
        - name: "id"
          in: "path"
          description: "ID of user to return"
          required: true
          schema:
            type: "integer"
            format: "int64"
      responses:
        '200':
          description: "Successful operation"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
    put:
      security:
        - bearerAuth: []
      tags:
        - "Users"
      summary: "Update user"
      description: "Update user"
      operationId: "updateUser"
      parameters:
        - name: "id"
          in: "path"
          description: "ID of user to return"
          required: true
          schema:
            type: "integer"
            format: "int64"
      requestBody:
        description: "User object that needs to be added"
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/User"
      responses:
        '200':
          description: "Successful operation"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
    delete:
      security:
        - bearerAuth: []
      tags:
        - "Users"
      summary: "Delete user"
      description: "Delete user"
      operationId: "deleteUser"
      parameters:
        - name: "id"
          in: "path"
          description: "ID of user to return"
          required: true
          schema:
            type: "integer"
            format: "int64"
      responses:
        '200':
          description: "Successful operation"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
  /user/username/{username}:
    get:
      security:
        - bearerAuth: []
      tags:
        - "Users"
      summary: "Get user by username"
      description: "Get user by username"
      operationId: "getUserByUsername"
      parameters:
        - name: "username"
          in: "path"
          description: "Username of user to return"
          required: true
          schema:
            type: "string"
      responses:
        '200':
          description: "Successful operation"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
  /videos:
    get:
      tags:
        - "Videos"
      summary: "Get all videos"
      description: "Get all videos"
      operationId: "getVideos"
      responses:
        '200':
          description: "Successful operation"
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Video"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
    post:
      security:
        - bearerAuth: []
      tags:
        - "Videos"
      summary: "Create video"
      description: "Create video"
      operationId: "createVideo"
      requestBody:
        description: "Video object that needs to be added"
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Video"
      responses:
        '200':
          description: "Successful operation"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Video"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
  /videos/{id}:
    get:
      tags:
        - "Videos"
      summary: "Get video by id"
      description: "Get video by id"
      operationId: "getVideoById"
      parameters:
        - name: "id"
          in: "path"
          description: "ID of video to return"
          required: true
          schema:
            type: "integer"
            format: "int64"
      responses:
        '200':
          description: "Successful operation"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Video"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
    put:
      security:
        - bearerAuth: []
      tags:
        - "Videos"
      summary: "Update video"
      description: "Update video"
      operationId: "updateVideo"
      parameters:
        - name: "id"
          in: "path"
          description: "ID of video to return"
          required: true
          schema:
            type: "integer"
            format: "int64"
      requestBody:
        description: "Video object that needs to be added"
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Video"
      responses:
        '200':
          description: "Successful operation"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Video"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
    delete:
      security:
        - bearerAuth: []
      tags:
        - "Videos"
      summary: "Delete video"
      description: "Delete video"
      operationId: "deleteVideo"
      parameters:
        - name: "id"
          in: "path"
          description: "ID of video to return"
          required: true
          schema:
            type: "integer"
            format: "int64"
      responses:
        '200':
          description: "Successful operation"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Video"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
  /videos/channel/{id}:
    get:
      tags:
        - "Videos"
      summary: "Get video by channel id"
      description: "Get video by channel id"
      operationId: "getVideoByChannelId"
      parameters:
        - name: "id"
          in: "path"
          description: "ID of channel to return"
          required: true
          schema:
            type: "integer"
            format: "int64"
      responses:
        '200':
          description: "Successful operation"
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Video"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
  /roles:
    get:
      security:
        - bearerAuth: []
      tags:
        - "Rôles"
      summary: "Get all rôles"
      description: "Get all rôles"
      operationId: "getRôles"
      responses:
        '200':
          description: "Successful operation"
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Rôles"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
    post:
      security:
        - bearerAuth: []
      tags:
        - "Rôles"
      summary: "Create rôles"
      description: "Create rôles"
      operationId: "createRôles"
      requestBody:
        description: "Rôles object that needs to be added"
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Rôles"
      responses:
        '200':
          description: "Successful operation"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Rôles"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
  /roles/{id}:
    get:
      security:
        - bearerAuth: []
      tags:
        - "Rôles"
      summary: "Get rôles by id"
      description: "Get rôles by id"
      operationId: "getRôlesById"
      parameters:
        - name: "id"
          in: "path"
          description: "ID of rôles to return"
          required: true
          schema:
            type: "integer"
            format: "int64"
      responses:
        '200':
          description: "Successful operation"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Rôles"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
    put:
      security:
        - bearerAuth: []
      tags:
        - "Rôles"
      summary: "Update rôles"
      description: "Update rôles"
      operationId: "updateRôles"
      parameters:
        - name: "id"
          in: "path"
          description: "ID of rôles to return"
          required: true
          schema:
            type: "integer"
            format: "int64"
      requestBody:
        description: "Rôles object that needs to be added"
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Rôles"
      responses:
        '200':
          description: "Successful operation"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Rôles"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
    delete:
      security:
        - bearerAuth: []
      tags:
        - "Rôles"
      summary: "Delete rôles"
      description: "Delete rôles"
      operationId: "deleteRôles"
      parameters:
        - name: "id"
          in: "path"
          description: "ID of rôles to return"
          required: true
          schema:
            type: "integer"
            format: "int64"
      responses:
        '200':
          description: "Successful operation"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Rôles"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
  /category:
    get:
      tags:
        - "Category"
      summary: "Get all category"
      description: "Get all category"
      operationId: "getCategory"
      responses:
        '200':
          description: "Successful operation"
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Category"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
    post:
      security:
        - bearerAuth: []
      tags:
        - "Category"
      summary: "Create category"
      description: "Create category"
      operationId: "createCategory"
      requestBody:
        description: "Category object that needs to be added"
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Category"
      responses:
        '200':
          description: "Successful operation"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Category"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
  /category/{id}:
    get:
      tags:
        - "Category"
      summary: "Get category by id"
      description: "Get category by id"
      operationId: "getCategoryById"
      parameters:
        - name: "id"
          in: "path"
          description: "ID of category to return"
          required: true
          schema:
            type: "integer"
            format: "int64"
      responses:
        '200':
          description: "Successful operation"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Category"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
    put:
      security:
        - bearerAuth: []
      tags:
        - "Category"
      summary: "Update category"
      description: "Update category"
      operationId: "updateCategory"
      parameters:
        - name: "id"
          in: "path"
          description: "ID of category to return"
          required: true
          schema:
            type: "integer"
            format: "int64"
      requestBody:
        description: "Category object that needs to be added"
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Category"
      responses:
        '200':
          description: "Successful operation"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Category"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error
    delete:
      security:
        - bearerAuth: []
      tags:
        - "Category"
      summary: "Delete category"
      description: "Delete category"
      operationId: "deleteCategory"
      parameters:
        - name: "id"
          in: "path"
          description: "ID of category to return"
          required: true
          schema:
            type: "integer"
            format: "int64"
      responses:
        '200':
          description: "Successful operation"
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
        '500':
          description: Internal server error



components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    User:
        type: object
        properties:
          id:
            type: integer
            format: int64
            description: "User id"
          firstname:
            type: string
            description: "User firstname"
          lastname:
            type: string
            description: "User lastname"
          email:
            type: string
            format: email
            description: "User email"
          dateOfBirth:
            type: string
            format: date
            description: "User date of birth"
          username:
            type: string
            description: "User username"
          password:
            type: string
            format: password
            description: "User password"
          createdAt:
            type: string
            format: date-time
            description: "User creation date"
          status:
            type: boolean
            default: true
            description: "User status"
          language:
            type: string
            format: language
            description: "User language"
          profileImage:
            type: string
            format: binary
            description: "User profile image"
    Video:
        type: object
        properties:
          id:
            type: integer
            format: int64
            description: "Video id"
          title:
            type: string
            description: "Video title"
          createdAt:
            type: string
            format: date-time
            description: "Video creation date"
          like:
            type: integer
            format: int64
            description: "Video like"
          dislike:
            type: integer
            format: int64
            description: "Video dislike"
          description:
            type: string
            description: "Video description"
          language:
            type: string
            format: language
            description: "Video language"
          time:
            type: string
            format: time
            description: "Video time"
          img:
            type: string
            format: binary
            description: "Video image"
          url:
            type: string
            format: url
            description: "Video url"
          idComment:
            type: array
            format: int64
            description: "Video comment id"
          idChannel:
            type: integer
            format: int64
            description: "Video channel id"
          idCategory:
            type: integer
            format: int64
            description: "Video category id"
    Rôles:
        type: object
        properties:
          id:
            type: integer
            format: int64
            description: "Rôles id"
          name:
            type: string
            description: "Rôles name"
          permission:
            type: array
            format: string
            description: "Rôles permission"
          idUser:
            type: array
            format: int64
            description: "Rôles user id"
    Notifications:
        type: object
        properties:
          id:
            type: integer
            format: int64
            description: "Notification id"
          title:
            type: string
            description: "Notification title"
          description:
            type: string
            description: "Notification description"
          url:
            type: string
            format: url
            description: "Notification url"
          type:
            type: string
            description: "Notification type"
          idUser:
            type: integer
            format: int64
            description: "Notification user id"
    Historics:
        type: object
        properties:
          id:
            type: integer
            format: int64
            description: "Historics id"
          idUser:
            type: integer
            format: int64
            description: "Historics user id"
          idVideo:
            type: integer
            format: int64
            description: "Historics video id"
    Comments:
        type: object
        properties:
          id:
            type: integer
            format: int64
            description: "Comment id"
          like:
            type: integer
            format: int64
            description: "Comment like"
          dislike:
            type: integer
            format: int64
            description: "Comment dislike"
          texte:
            type: string
            description: "Comment texte"
          createdAt:
            type: string
            format: date-time
            description: "Comment creation date"
          idUser:
            type: integer
            format: int64
            description: "Comment user id"
    Channels:
        type: object
        properties:
          id:
            type: integer
            format: int64
            description: "Channel id"
          name:
            type: string
            description: "Channel name"
          image:
            type: string
            format: binary
            description: "Channel image"
          description:
            type: string
            description: "Channel description"
          idCategory:
            type: array
            format: int64
            description: "Channel category id"
          idVideos:
            type: array
            format: int64
            description: "Channel video id"
    Category:
        type: object
        properties:
          id:
            type: integer
            format: int64
            description: "Category id"
          name:
            type: string
            description: "Category name"
          image:
            type: string
            format: binary
            description: "Category image"